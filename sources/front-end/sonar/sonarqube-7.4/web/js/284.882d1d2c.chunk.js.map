{"version":3,"sources":["webpack:///./src/main/js/apps/permissions/project/components/AllHoldersList.tsx","webpack:///./src/main/js/apps/permissions/project/components/PageHeader.tsx","webpack:///./src/main/js/apps/permissions/project/components/PublicProjectDisclaimer.tsx","webpack:///./src/main/js/apps/permissions/project/components/App.tsx","webpack:///./src/main/js/apps/permissions/project/components/AppContainer.ts","webpack:///./src/main/js/components/controls/ConfirmModal.tsx"],"names":["_super","AllHoldersList","_this","apply","this","arguments","handleToggleUser","user","permission","permissions","includes","props","revokePermissionFromUser","login","grantPermissionToUser","handleToggleGroup","group","revokePermissionFromGroup","name","grantPermissionToGroup","handleSelectPermission","onPermissionSelect","__extends","prototype","render","_a","filter","groups","groupsPaging","users","usersPaging","order","utils","component","qualifier","visibility","types","Public","without_default","Object","count","total","length","index_js_exposed","HoldersList","onSelectPermission","onToggleGroup","onToggleUser","query","selectedPermission","SearchForm","onFilter","onFilterChange","onSearch","onQueryChange","ListFooter","loadMore","onLoadMore","PageHeader","mounted","state","applyTemplateModal","handleApplyTemplate","setState","handleApplyTemplateClose","PageHeader_extends","componentDidMount","componentWillUnmount","configuration","canApplyPermissionTemplate","description","l10n","visibilityDescription","undefined","className","loading","buttons","onClick","ApplyTemplate","onApply","loadHolders","onClose","organization","project","PublicProjectDisclaimer","onConfirm","ConfirmModal","confirmButtonText","header","App","call","stopLoading","loadUsersAndGroups","userPage","groupsPage","getUsers","api_permissions","projectKey","key","q","p","Promise","resolve","paging","getGroups","all","then","usersResponse","groupsResponse","pageIndex","concat","handleFilterChange","handleQueryChange","handlePermissionSelect","addPermissionToGroup","map","candidate","__assign","addPermissionToUser","removePermissionFromGroup","removePermissionFromUser","groupName","handleVisibilityChange","openDisclaimer","turnProjectToPrivate","turnProjectToPublic","onComponentChange","Private","disclaimer","closeDisclaimer","App_extends","canTurnToPrivate","canUpdateProjectVisibilityToPrivate","id","Helmet_default","a","title","components_PageHeader","VisibilitySelector","onChange","UpgradeOrganizationBox","components_AllHoldersList","__webpack_exports__","es","currentUser","rootReducer","components_App","handleSubmit","result","confirmData","renderModalContent","onCloseClick","onFormSubmit","submitting","_b","children","confirmDisable","isDestructive","react__WEBPACK_IMPORTED_MODULE_0__","onSubmit","_common_DeferredSpinner__WEBPACK_IMPORTED_MODULE_2__","_ui_buttons__WEBPACK_IMPORTED_MODULE_4__","autoFocus","disabled","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","_SimpleModal__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"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","file":"js/284.882d1d2c.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { without } from 'lodash';\nimport SearchForm from '../../shared/components/SearchForm';\nimport HoldersList from '../../shared/components/HoldersList';\nimport ListFooter from '../../../../components/controls/ListFooter';\nimport { PERMISSIONS_ORDER_BY_QUALIFIER, convertToPermissionDefinitions } from '../../utils';\nimport {\n  Component,\n  Paging,\n  PermissionGroup,\n  PermissionUser,\n  Visibility\n} from '../../../../app/types';\n\ninterface Props {\n  component: Component;\n  filter: string;\n  grantPermissionToGroup: (group: string, permission: string) => Promise<void>;\n  grantPermissionToUser: (user: string, permission: string) => Promise<void>;\n  groups: PermissionGroup[];\n  groupsPaging?: Paging;\n  onLoadMore: () => void;\n  onFilterChange: (filter: string) => void;\n  onPermissionSelect: (permissions?: string) => void;\n  onQueryChange: (query: string) => void;\n  query: string;\n  revokePermissionFromGroup: (group: string, permission: string) => Promise<void>;\n  revokePermissionFromUser: (user: string, permission: string) => Promise<void>;\n  selectedPermission?: string;\n  users: PermissionUser[];\n  usersPaging?: Paging;\n  visibility?: Visibility;\n}\n\nexport default class AllHoldersList extends React.PureComponent<Props> {\n  handleToggleUser = (user: PermissionUser, permission: string) => {\n    const hasPermission = user.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromUser(user.login, permission);\n    } else {\n      return this.props.grantPermissionToUser(user.login, permission);\n    }\n  };\n\n  handleToggleGroup = (group: PermissionGroup, permission: string) => {\n    const hasPermission = group.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromGroup(group.name, permission);\n    } else {\n      return this.props.grantPermissionToGroup(group.name, permission);\n    }\n  };\n\n  handleSelectPermission = (permission?: string) => {\n    this.props.onPermissionSelect(permission);\n  };\n\n  render() {\n    const { filter, groups, groupsPaging, users, usersPaging } = this.props;\n    let order = PERMISSIONS_ORDER_BY_QUALIFIER[this.props.component.qualifier];\n    if (this.props.visibility === Visibility.Public) {\n      order = without(order, 'user', 'codeviewer');\n    }\n    const permissions = convertToPermissionDefinitions(order, 'projects_role');\n\n    let count = 0;\n    let total = 0;\n    if (filter !== 'users') {\n      count += groups.length;\n      total += groupsPaging ? groupsPaging.total : groups.length;\n    }\n    if (filter !== 'groups') {\n      count += users.length;\n      total += usersPaging ? usersPaging.total : users.length;\n    }\n\n    return (\n      <>\n        <HoldersList\n          filter={this.props.filter}\n          groups={this.props.groups}\n          onSelectPermission={this.handleSelectPermission}\n          onToggleGroup={this.handleToggleGroup}\n          onToggleUser={this.handleToggleUser}\n          permissions={permissions}\n          query={this.props.query}\n          selectedPermission={this.props.selectedPermission}\n          users={this.props.users}>\n          <SearchForm\n            filter={this.props.filter}\n            onFilter={this.props.onFilterChange}\n            onSearch={this.props.onQueryChange}\n            query={this.props.query}\n          />\n        </HoldersList>\n        <ListFooter count={count} loadMore={this.props.onLoadMore} total={total} />\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ApplyTemplate from './ApplyTemplate';\nimport { Component } from '../../../../app/types';\nimport { Button } from '../../../../components/ui/buttons';\nimport { translate } from '../../../../helpers/l10n';\n\ninterface Props {\n  component: Component;\n  loadHolders: () => void;\n  loading: boolean;\n}\n\ninterface State {\n  applyTemplateModal: boolean;\n}\n\nexport default class PageHeader extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { applyTemplateModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleApplyTemplate = () => {\n    this.setState({ applyTemplateModal: true });\n  };\n\n  handleApplyTemplateClose = () => {\n    if (this.mounted) {\n      this.setState({ applyTemplateModal: false });\n    }\n  };\n\n  render() {\n    const { component } = this.props;\n    const { configuration } = component;\n    const canApplyPermissionTemplate =\n      configuration != null && configuration.canApplyPermissionTemplate;\n\n    const description = ['VW', 'SVW', 'APP'].includes(component.qualifier)\n      ? translate('roles.page.description_portfolio')\n      : translate('roles.page.description2');\n\n    const visibilityDescription =\n      component.qualifier === 'TRK' && component.visibility\n        ? translate('visibility', component.visibility, 'description', component.qualifier)\n        : undefined;\n\n    return (\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{translate('permissions.page')}</h1>\n\n        {this.props.loading && <i className=\"spinner\" />}\n\n        {canApplyPermissionTemplate && (\n          <div className=\"page-actions\">\n            <Button className=\"js-apply-template\" onClick={this.handleApplyTemplate}>\n              {translate('projects_role.apply_template')}\n            </Button>\n\n            {this.state.applyTemplateModal && (\n              <ApplyTemplate\n                onApply={this.props.loadHolders}\n                onClose={this.handleApplyTemplateClose}\n                organization={component.organization}\n                project={component}\n              />\n            )}\n          </div>\n        )}\n\n        <div className=\"page-description\">\n          <p>{description}</p>\n          {visibilityDescription && <p>{visibilityDescription}</p>}\n        </div>\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal from '../../../../components/controls/ConfirmModal';\nimport { translate, translateWithParameters } from '../../../../helpers/l10n';\n\ninterface Props {\n  component: {\n    name: string;\n    qualifier: string;\n  };\n  onClose: () => void;\n  onConfirm: () => void;\n}\n\nexport default function PublicProjectDisclaimer({ component, onClose, onConfirm }: Props) {\n  const { qualifier } = component;\n  return (\n    <ConfirmModal\n      confirmButtonText={translate('projects_role.turn_project_to_public', qualifier)}\n      header={translateWithParameters('projects_role.turn_x_to_public', component.name)}\n      onClose={onClose}\n      onConfirm={onConfirm}>\n      <div className=\"alert alert-warning modal-alert\">\n        {translate('projects_role.are_you_sure_to_turn_project_to_public.warning', qualifier)}\n      </div>\n      <p>{translate('projects_role.are_you_sure_to_turn_project_to_public', qualifier)}</p>\n    </ConfirmModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\nimport { without } from 'lodash';\nimport AllHoldersList from './AllHoldersList';\nimport PageHeader from './PageHeader';\nimport PublicProjectDisclaimer from './PublicProjectDisclaimer';\nimport UpgradeOrganizationBox from '../../../../components/common/UpgradeOrganizationBox';\nimport VisibilitySelector from '../../../../components/common/VisibilitySelector';\nimport * as api from '../../../../api/permissions';\nimport { translate } from '../../../../helpers/l10n';\nimport {\n  Component,\n  Paging,\n  PermissionGroup,\n  PermissionUser,\n  Visibility\n} from '../../../../app/types';\nimport '../../styles.css';\n\ninterface Props {\n  component: Component;\n  onComponentChange: (changes: Partial<Component>) => void;\n}\n\ninterface State {\n  disclaimer: boolean;\n  filter: string;\n  groups: PermissionGroup[];\n  groupsPaging?: Paging;\n  loading: boolean;\n  query: string;\n  selectedPermission?: string;\n  users: PermissionUser[];\n  usersPaging?: Paging;\n}\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      disclaimer: false,\n      filter: 'all',\n      groups: [],\n      loading: true,\n      query: '',\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadHolders();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  loadUsersAndGroups = (userPage?: number, groupsPage?: number) => {\n    const { component } = this.props;\n    const { filter, query, selectedPermission } = this.state;\n\n    const getUsers: Promise<{ paging?: Paging; users: PermissionUser[] }> =\n      filter !== 'groups'\n        ? api.getPermissionsUsersForComponent({\n            projectKey: component.key,\n            q: query || undefined,\n            permission: selectedPermission,\n            organization: component.organization,\n            p: userPage\n          })\n        : Promise.resolve({ paging: undefined, users: [] });\n\n    const getGroups: Promise<{ paging?: Paging; groups: PermissionGroup[] }> =\n      filter !== 'users'\n        ? api.getPermissionsGroupsForComponent({\n            projectKey: component.key,\n            q: query || undefined,\n            permission: selectedPermission,\n            organization: component.organization,\n            p: groupsPage\n          })\n        : Promise.resolve({ paging: undefined, groups: [] });\n\n    return Promise.all([getUsers, getGroups]);\n  };\n\n  loadHolders = () => {\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups().then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState({\n          groups: groupsResponse.groups,\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: usersResponse.users,\n          usersPaging: usersResponse.paging\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  onLoadMore = () => {\n    const { usersPaging, groupsPaging } = this.state;\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups(\n      usersPaging ? usersPaging.pageIndex + 1 : 1,\n      groupsPaging ? groupsPaging.pageIndex + 1 : 1\n    ).then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState(({ groups, users }) => ({\n          groups: [...groups, ...groupsResponse.groups],\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: [...users, ...usersResponse.users],\n          usersPaging: usersResponse.paging\n        }));\n      }\n    }, this.stopLoading);\n  };\n\n  handleFilterChange = (filter: string) => {\n    if (this.mounted) {\n      this.setState({ filter }, this.loadHolders);\n    }\n  };\n\n  handleQueryChange = (query: string) => {\n    if (this.mounted) {\n      this.setState({ query }, this.loadHolders);\n    }\n  };\n\n  handlePermissionSelect = (selectedPermission?: string) => {\n    if (this.mounted) {\n      this.setState(\n        (state: State) => ({\n          selectedPermission:\n            state.selectedPermission === selectedPermission ? undefined : selectedPermission\n        }),\n        this.loadHolders\n      );\n    }\n  };\n\n  addPermissionToGroup = (group: string, permission: string) => {\n    return this.state.groups.map(\n      candidate =>\n        candidate.name === group\n          ? { ...candidate, permissions: [...candidate.permissions, permission] }\n          : candidate\n    );\n  };\n\n  addPermissionToUser = (user: string, permission: string) => {\n    return this.state.users.map(\n      candidate =>\n        candidate.login === user\n          ? { ...candidate, permissions: [...candidate.permissions, permission] }\n          : candidate\n    );\n  };\n\n  removePermissionFromGroup = (group: string, permission: string) => {\n    return this.state.groups.map(\n      candidate =>\n        candidate.name === group\n          ? { ...candidate, permissions: without(candidate.permissions, permission) }\n          : candidate\n    );\n  };\n\n  removePermissionFromUser = (user: string, permission: string) => {\n    return this.state.users.map(\n      candidate =>\n        candidate.login === user\n          ? { ...candidate, permissions: without(candidate.permissions, permission) }\n          : candidate\n    );\n  };\n\n  grantPermissionToGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        groups: this.addPermissionToGroup(group, permission)\n      });\n      return api\n        .grantPermissionToGroup({\n          projectKey: this.props.component.key,\n          groupName: group,\n          permission,\n          organization: this.props.component.organization\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              groups: this.removePermissionFromGroup(group, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  grantPermissionToUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        users: this.addPermissionToUser(user, permission)\n      });\n      return api\n        .grantPermissionToUser({\n          projectKey: this.props.component.key,\n          login: user,\n          permission,\n          organization: this.props.component.organization\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              users: this.removePermissionFromUser(user, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        groups: this.removePermissionFromGroup(group, permission)\n      });\n      return api\n        .revokePermissionFromGroup({\n          projectKey: this.props.component.key,\n          groupName: group,\n          permission,\n          organization: this.props.component.organization\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              groups: this.addPermissionToGroup(group, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        users: this.removePermissionFromUser(user, permission)\n      });\n      return api\n        .revokePermissionFromUser({\n          projectKey: this.props.component.key,\n          login: user,\n          permission,\n          organization: this.props.component.organization\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              users: this.addPermissionToUser(user, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  handleVisibilityChange = (visibility: string) => {\n    if (visibility === Visibility.Public) {\n      this.openDisclaimer();\n    } else {\n      this.turnProjectToPrivate();\n    }\n  };\n\n  turnProjectToPublic = () => {\n    this.props.onComponentChange({ visibility: Visibility.Public });\n    api.changeProjectVisibility(this.props.component.key, Visibility.Public).then(\n      () => {\n        this.loadHolders();\n      },\n      () => {\n        this.props.onComponentChange({\n          visibility: Visibility.Private\n        });\n      }\n    );\n  };\n\n  turnProjectToPrivate = () => {\n    this.props.onComponentChange({ visibility: Visibility.Private });\n    api.changeProjectVisibility(this.props.component.key, Visibility.Private).then(\n      () => {\n        this.loadHolders();\n      },\n      () => {\n        this.props.onComponentChange({\n          visibility: Visibility.Public\n        });\n      }\n    );\n  };\n\n  openDisclaimer = () => {\n    if (this.mounted) {\n      this.setState({ disclaimer: true });\n    }\n  };\n\n  closeDisclaimer = () => {\n    if (this.mounted) {\n      this.setState({ disclaimer: false });\n    }\n  };\n\n  render() {\n    const canTurnToPrivate =\n      this.props.component.configuration != null &&\n      this.props.component.configuration.canUpdateProjectVisibilityToPrivate;\n\n    return (\n      <div className=\"page page-limited\" id=\"project-permissions-page\">\n        <Helmet title={translate('permissions.page')} />\n\n        <PageHeader\n          component={this.props.component}\n          loadHolders={this.loadHolders}\n          loading={this.state.loading}\n        />\n        <div>\n          <VisibilitySelector\n            canTurnToPrivate={canTurnToPrivate}\n            className=\"big-spacer-top big-spacer-bottom\"\n            onChange={this.handleVisibilityChange}\n            visibility={this.props.component.visibility}\n          />\n          {this.props.component.qualifier === 'TRK' &&\n            !canTurnToPrivate && (\n              <UpgradeOrganizationBox organization={this.props.component.organization} />\n            )}\n          {this.state.disclaimer && (\n            <PublicProjectDisclaimer\n              component={this.props.component}\n              onClose={this.closeDisclaimer}\n              onConfirm={this.turnProjectToPublic}\n            />\n          )}\n        </div>\n        <AllHoldersList\n          component={this.props.component}\n          filter={this.state.filter}\n          grantPermissionToGroup={this.grantPermissionToGroup}\n          grantPermissionToUser={this.grantPermissionToUser}\n          groups={this.state.groups}\n          groupsPaging={this.state.groupsPaging}\n          onFilterChange={this.handleFilterChange}\n          onLoadMore={this.onLoadMore}\n          onPermissionSelect={this.handlePermissionSelect}\n          onQueryChange={this.handleQueryChange}\n          query={this.state.query}\n          revokePermissionFromGroup={this.revokePermissionFromGroup}\n          revokePermissionFromUser={this.revokePermissionFromUser}\n          selectedPermission={this.state.selectedPermission}\n          users={this.state.users}\n          usersPaging={this.state.usersPaging}\n          visibility={this.props.component.visibility}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport App from './App';\nimport { getCurrentUser, Store } from '../../../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SimpleModal, { ChildrenProps } from './SimpleModal';\nimport DeferredSpinner from '../common/DeferredSpinner';\nimport { translate } from '../../helpers/l10n';\nimport { SubmitButton, ResetButtonLink } from '../ui/buttons';\n\ninterface Props<T> {\n  children: React.ReactNode;\n  confirmButtonText: string;\n  confirmData?: T;\n  confirmDisable?: boolean;\n  header: string;\n  isDestructive?: boolean;\n  onClose: () => void;\n  onConfirm: (data?: T) => void | Promise<void>;\n}\n\nexport default class ConfirmModal<T = string> extends React.PureComponent<Props<T>> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSubmit = () => {\n    const result = this.props.onConfirm(this.props.confirmData);\n    if (result) {\n      return result.then(this.props.onClose, () => {});\n    } else {\n      this.props.onClose();\n      return undefined;\n    }\n  };\n\n  renderModalContent = ({ onCloseClick, onFormSubmit, submitting }: ChildrenProps) => {\n    const { children, confirmButtonText, confirmDisable, header, isDestructive } = this.props;\n    return (\n      <form onSubmit={onFormSubmit}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <div className=\"modal-body\">{children}</div>\n        <footer className=\"modal-foot\">\n          <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n          <SubmitButton\n            autoFocus={true}\n            className={isDestructive ? 'button-red' : undefined}\n            disabled={submitting || confirmDisable}>\n            {confirmButtonText}\n          </SubmitButton>\n          <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        </footer>\n      </form>\n    );\n  };\n\n  render() {\n    const { header } = this.props;\n    return (\n      <SimpleModal header={header} onClose={this.props.onClose} onSubmit={this.handleSubmit}>\n        {this.renderModalContent}\n      </SimpleModal>\n    );\n  }\n}\n"],"sourceRoot":""}
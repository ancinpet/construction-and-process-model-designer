(window.webpackJsonp=window.webpackJsonp||[]).push([[371],{1007:function(e,t,n){"use strict";var r,o=n(565),a=n(1032),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.handleSubmit=function(e,n){var r=n.setSubmitting,o=t.props.onSubmit(e),a=function(){t.mounted&&r(!1)};o?o.then(a,a):a()},t}return i(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this;return o.createElement(a.a,{initialValues:this.props.initialValues,isInitialValid:this.props.isInitialValid,onSubmit:this.handleSubmit,validate:this.props.validate},function(t){var n=t.handleSubmit,r=c(t,["handleSubmit"]);return o.createElement("form",{onSubmit:n},e.props.children(r))})},t}(o.Component);t.a=l},1634:function(e,t,n){"use strict";n.r(t);var r=n(565),o=n(585),a=n(560),i=n(569),c=n(574),l=n(1101),s=n(566),p=n(661),u=n(641);function d(e){var t=e.dirty&&e.touched&&void 0!==e.error,n=e.dirty&&e.touched&&void 0===e.error;return r.createElement("div",null,r.createElement("label",{htmlFor:e.id},e.label,e.required&&r.createElement("em",{className:"mandatory"},"*")),r.createElement("div",{className:"little-spacer-top spacer-bottom"},e.children({className:s("input-super-large","text-middle",{"is-invalid":t,"is-valid":n}),disabled:e.isSubmitting,id:e.id,name:e.name,onBlur:e.onBlur,onChange:e.onChange,type:"text",value:e.value}),t&&r.createElement(r.Fragment,null,r.createElement(p.a,{className:"spacer-left text-middle"}),r.createElement("span",{className:"little-spacer-left text-danger text-middle"},e.error)),n&&r.createElement(u.a,{className:"spacer-left text-middle"})),e.description&&r.createElement("div",{className:"note abs-width-400"},e.description))}var m,f=n(756),h=n(1007),g=n(13),b=n(567),y=n(593),v=n(634),O=(m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},E={avatar:"",description:"",name:"",key:"",url:""},P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={additional:!1},t.getInitialValues=function(){var e=t.props.organization;return e?{avatar:e.avatar||"",description:e.description||"",name:e.name,key:e.key,url:e.url||""}:E},t.handleAdditionalClick=function(){t.setState(function(e){return{additional:!e.additional}})},t.checkFreeKey=function(e){return Object(v.d)(e).then(function(e){return void 0===e},function(){return!0})},t.handleValidate=function(e){var n=e.avatar,r=e.name,o=e.key,a=e.url,i={};return n.length>0&&!Object(l.isWebUri)(n)&&(i.avatar=Object(g.l)("onboarding.create_organization.avatar.error")),r.length>255&&(i.name=Object(g.l)("onboarding.create_organization.display_name.error")),(o.length>255||!/^[a-z0-9][a-z0-9-]*[a-z0-9]?$/.test(o))&&(i.key=Object(g.l)("onboarding.create_organization.organization_name.error")),a.length>0&&!Object(l.isWebUri)(a)&&(i.url=Object(g.l)("onboarding.create_organization.url.error")),i.key?Promise.reject(i):t.checkFreeKey(o).then(function(e){return e||(i.key=Object(g.l)("onboarding.create_organization.organization_name.taken")),Object.keys(i).length?Promise.reject(i):Promise.resolve(i)})},t.renderInnerForm=function(e){var n=e.dirty,o=e.errors,a=e.handleBlur,i=e.handleChange,c=e.isSubmitting,l=e.isValid,s=e.touched,p=e.values,u={dirty:n,isSubmitting:c,onBlur:a,onChange:i};return r.createElement(r.Fragment,null,r.createElement(d,_({},u,{description:Object(g.l)("onboarding.create_organization.organization_name.description"),error:o.key,id:"organization-key",label:Object(g.l)("onboarding.create_organization.organization_name"),name:"key",required:!0,touched:s.key,value:p.key}),function(e){return r.createElement("input",_({autoFocus:!0,maxLength:255},e))}),r.createElement("div",{className:"big-spacer-top"},r.createElement(b.e,{onClick:t.handleAdditionalClick},Object(g.l)(t.state.additional?"onboarding.create_organization.hide_additional_info":"onboarding.create_organization.add_additional_info"),r.createElement(y.a,{className:"little-spacer-left",turned:t.state.additional}))),r.createElement("div",{className:"js-additional-info",hidden:!t.state.additional},r.createElement("div",{className:"big-spacer-top"},r.createElement(d,_({},u,{description:Object(g.l)("onboarding.create_organization.display_name.description"),error:o.name,id:"organization-display-name",label:Object(g.l)("onboarding.create_organization.display_name"),name:"name",touched:s.name&&""!==p.name,value:p.name}),function(e){return r.createElement("input",_({},e))})),r.createElement("div",{className:"big-spacer-top"},r.createElement(d,_({},u,{description:Object(g.l)("onboarding.create_organization.avatar.description"),error:o.avatar,id:"organization-avatar",label:Object(g.l)("onboarding.create_organization.avatar"),name:"avatar",touched:s.avatar&&""!==p.avatar,value:p.avatar}),function(e){return r.createElement("input",_({},e))})),r.createElement("div",{className:"big-spacer-top"},r.createElement(d,_({},u,{error:o.description,id:"organization-description",label:Object(g.l)("description"),name:"description",touched:s.description&&""!==p.description,value:p.description}),function(e){return r.createElement("textarea",_({},e,{maxLength:256,rows:3}))})),r.createElement("div",{className:"big-spacer-top"},r.createElement(d,_({},u,{error:o.url,id:"organization-url",label:Object(g.l)("onboarding.create_organization.url"),name:"url",touched:s.url&&""!==p.url,value:p.url}),function(e){return r.createElement("input",_({},e))}))),r.createElement("div",{className:"big-spacer-top"},r.createElement(b.f,{disabled:c||!l},Object(g.l)("continue"))))},t.renderForm=function(){return r.createElement("div",{className:"boxed-group-inner"},r.createElement(h.a,{initialValues:t.getInitialValues(),isInitialValid:void 0!==t.props.organization,onSubmit:t.props.onContinue,validate:t.handleValidate},t.renderInnerForm))},t.renderResult=function(){var e=t.props.organization;return e?r.createElement("div",{className:"boxed-group-actions display-flex-center"},r.createElement(u.a,{className:"spacer-right"}),r.createElement("strong",{className:"text-limited"},e.key)):null},t}return O(t,e),t.prototype.render=function(){return r.createElement(f.a,{finished:this.props.finished,onOpen:this.props.onOpen,open:this.props.open,renderForm:this.renderForm,renderResult:this.renderResult,stepNumber:1,stepTitle:Object(g.l)("onboarding.create_organization.enter_org_details")})},t}(r.PureComponent),j=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z=function(){return(z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t.prototype.render=function(){var e=window.SonarBilling.BillingForm;return r.createElement(e,z({},this.props))},t}(r.Component),w=n(578),x=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(){return(C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function N(e){var t=e.displayName||e.name||"Component",n=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return x(o,n),o.prototype.render=function(){return r.createElement(e,C({},this.props))},o.displayName="withCurrentUser("+t+")",o}(r.Component);return Object(c.connect)(function(e){return{currentUser:Object(w.getCurrentUser)(e)}})(n)}var F,S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.currentTarget.blur(),t.props.onCheck()},t}return S(t,e),t.prototype.render=function(){return r.createElement("a",{"aria-checked":this.props.checked,className:s("display-inline-flex-center link-base-color link-no-underline",this.props.className),href:"#",onClick:this.handleClick,role:"radio"},r.createElement("i",{className:s("icon-radio","spacer-right",{"is-checked":this.props.checked})}),this.props.children)},t}(r.PureComponent),A=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e.Free="free",e.Paid="paid"}(F||(F={}));var U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleFreePlanClick=function(){t.props.onChange(F.Free)},t.handlePaidPlanClick=function(){t.props.onChange(F.Paid)},t}return A(t,e),t.prototype.render=function(){var e=this.props.plan;return r.createElement("div",{"aria-label":Object(g.l)("onboarding.create_organization.choose_plan"),className:"huge-spacer-bottom",role:"radiogroup"},r.createElement("div",null,r.createElement(D,{checked:e===F.Free,onCheck:this.handleFreePlanClick},r.createElement("span",null,Object(g.l)("billing.free_plan.title"))),r.createElement("p",{className:"note markdown little-spacer-top"},Object(g.l)("billing.free_plan.description"))),r.createElement("div",{className:"big-spacer-top"},r.createElement(D,{checked:e===F.Paid,onCheck:this.handlePaidPlanClick},r.createElement("span",null,Object(g.l)("billing.paid_plan.title"))),r.createElement("p",{className:"note markdown little-spacer-top"},r.createElement(a.FormattedMessage,{defaultMessage:Object(g.l)("billing.paid_plan.description"),id:"billing.paid_plan.description",values:{price:this.props.startingPrice,more:r.createElement(r.Fragment,null," ",r.createElement(i.Link,{target:"_blank",to:"/documentation/sonarcloud-pricing/"},Object(g.l)("learn_more")),r.createElement("br",null))}}))))},t}(r.PureComponent),V=n(771),I=n(580),L=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=N(k),R=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.handlePlanChange=function(e){n.setState({plan:e})},n.stopSubmitting=function(){n.mounted&&n.setState({submitting:!1})},n.handleFreePlanSubmit=function(){n.setState({submitting:!0}),n.props.onFreePlanChoose().then(n.stopSubmitting,n.stopSubmitting)},n.renderForm=function(){return r.createElement("div",{className:"boxed-group-inner"},n.state.ready&&r.createElement(r.Fragment,null,!n.props.onlyPaid&&r.createElement(U,{onChange:n.handlePlanChange,plan:n.state.plan,startingPrice:n.props.startingPrice}),n.state.plan===F.Paid?r.createElement(M,{onCommit:n.props.onPaidPlanChoose,onFailToUpgrade:n.props.deleteOrganization,organizationKey:n.props.createOrganization,subscriptionPlans:n.props.subscriptionPlans},function(e){var t=e.onSubmit,n=e.renderFormFields,o=e.renderSubmitGroup;return r.createElement("form",{onSubmit:t},n(),r.createElement("div",{className:"billing-input-large big-spacer-top"},o(Object(g.l)("onboarding.create_organization.create_and_upgrade"))))}):r.createElement("div",{className:"display-flex-center big-spacer-top"},r.createElement(b.f,{disabled:n.state.submitting,onClick:n.handleFreePlanSubmit},Object(g.l)("my_account.create_organization")),n.state.submitting&&r.createElement(I.a,{className:"spacer-left"}))))},n.state={plan:t.onlyPaid?F.Paid:F.Free,ready:!1,submitting:!1},n}return L(t,e),t.prototype.componentDidMount=function(){var e=this;this.mounted=!0,Object(V.a)("billing/billing").then(function(){e.mounted&&e.setState({ready:!0})},function(){})},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=Object(g.l)(this.props.onlyPaid?"onboarding.create_organization.enter_payment_details":"onboarding.create_organization.choose_plan");return r.createElement(f.a,{finished:!1,onOpen:function(){},open:this.props.open,renderForm:this.renderForm,renderResult:function(){return null},stepNumber:2,stepTitle:e})},t}(r.PureComponent),T=n(575);var B=n(582),W=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$=function(){return($=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var q=n(23),J=n(583);var K=n(577),G=n(714);n(870),n(710);n.d(t,"CreateOrganization",function(){return X});var H,Q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.OrganizationDetails=0]="OrganizationDetails",e[e.Plan=1]="Plan"}(H||(H={}));var X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0,step:H.OrganizationDetails},t.fetchSubscriptionPlans=function(){Object(q.getJSON)("/api/billing/show_subscription_plans").then(function(e){return e.subscriptionPlans},J.a).then(function(e){t.mounted&&t.setState({loading:!1,subscriptionPlans:e})},function(){t.mounted&&t.setState({loading:!1})})},t.finishCreation=function(e){t.props.router.push({pathname:Object(K.r)(e),state:{justCreated:!0}})},t.handleOrganizationDetailsStepOpen=function(){t.setState({step:H.OrganizationDetails})},t.handleOrganizationDetailsFinish=function(e){return t.setState({organization:e,step:H.Plan}),Promise.resolve()},t.handlePaidPlanChoose=function(){t.state.organization&&t.finishCreation(t.state.organization.key)},t.handleFreePlanChoose=function(){return t.createOrganization().then(function(e){t.finishCreation(e)})},t.createOrganization=function(){var e=t.state.organization;return e?t.props.createOrganization({avatar:e.avatar,description:e.description,key:e.key,name:e.name||e.key,url:e.url}).then(function(e){return e.key}):Promise.reject()},t.deleteOrganization=function(){var e=t.state.organization;e&&t.props.deleteOrganization(e.key).catch(function(){})},t}return Q(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,document.body.classList.add("white-page"),document.documentElement&&document.documentElement.classList.add("white-page"),this.fetchSubscriptionPlans()},t.prototype.componentWillUnmount=function(){this.mounted=!1,document.body.classList.remove("white-page")},t.prototype.render=function(){var e,t,n,c=this.props.location,l=this.state,s=l.loading,p=l.subscriptionPlans,u=Object(g.l)("onboarding.create_organization.page.header"),d=p&&p[0]&&p[0].price,m=(e=d,n=Object(T.formatMeasure)(e,"FLOAT").replace(/[.|,]0$/,"").replace(/([.|,]\d)$/,"$10"),t?n:Object(g.m)("billing.price_format",n));return r.createElement(r.Fragment,null,r.createElement(o.Helmet,{title:u,titleTemplate:"%s"}),r.createElement("div",{className:"sonarcloud page page-limited"},r.createElement("header",{className:"page-header"},r.createElement("h1",{className:"page-title big-spacer-bottom"},u),void 0!==d&&r.createElement("p",{className:"page-description"},r.createElement(a.FormattedMessage,{defaultMessage:Object(g.l)("onboarding.create_organization.page.description"),id:"onboarding.create_organization.page.description",values:{break:r.createElement("br",null),price:m,more:r.createElement(i.Link,{target:"_blank",to:"/documentation/sonarcloud-pricing/"},Object(g.l)("learn_more"))}}))),s?r.createElement("i",{className:"spinner"}):r.createElement(r.Fragment,null,r.createElement(P,{finished:void 0!==this.state.organization,onContinue:this.handleOrganizationDetailsFinish,onOpen:this.handleOrganizationDetailsStepOpen,open:this.state.step===H.OrganizationDetails,organization:this.state.organization}),void 0!==p&&r.createElement(R,{createOrganization:this.createOrganization,deleteOrganization:this.deleteOrganization,onFreePlanChoose:this.handleFreePlanChoose,onPaidPlanChoose:this.handlePaidPlanChoose,onlyPaid:c.state&&!0===c.state.paid,open:this.state.step===H.Plan,startingPrice:m,subscriptionPlans:p}))))},t}(r.PureComponent);var Y,Z,ee,te={createOrganization:function(e){return function(t){return v.b(e).then(function(e){return t(G.a(e)),e})}},deleteOrganization:function(e){return function(t){return v.c(e).then(function(){t(G.c(e))})}}};t.default=(Y=Object(c.connect)(null,te)(Object(i.withRouter)(X)),Z=Y.displayName||Y.name||"Component",ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.componentDidMount=function(){if(!Object(B.k)(this.props.currentUser)){var e=window.location.pathname+window.location.search+window.location.hash;this.props.router.replace({pathname:"/sessions/new",query:{return_to:e}})}},t.prototype.render=function(){return Object(B.k)(this.props.currentUser)?r.createElement(Y,$({},this.props)):null},t.displayName="whenLoggedIn("+Z+")",t}(r.Component),N(Object(i.withRouter)(ee)))},709:function(e,t,n){(e.exports=n(571)(!1)).push([e.i,".onboarding-step{position:relative;padding-left:34px}.onboarding-step:not(.is-open):not(.is-finished){opacity:.4}.onboarding-step .boxed-group-actions{height:24px;line-height:24px}.onboarding-step hr{margin-left:-54px}.onboarding-step-number{position:absolute;top:15px;left:15px;width:24px;height:24px;line-height:24px;border-radius:24px;background-color:#b9b9b9;color:#fff;font-size:14px;text-align:center}.onboarding-step.is-open .onboarding-step-number{background-color:#236a97}.onboarding-step.is-finished{cursor:pointer;outline:none}.onboarding-choices{display:flex;justify-content:space-around;padding:44px 0;background-color:#f3f3f3}.onboarding-choice{display:flex;flex-direction:column;justify-content:center;padding:16px;width:190px;height:190px;background-color:#fff;border:1px solid #fff;border-radius:3px;transition:all .2s ease;box-shadow:0 1px 1px 1px #e6e6e6}.onboarding-choice svg{color:#404040}.onboarding-choice-name{padding-top:8px;padding-bottom:4px;color:inherit;font-size:14px}.onboarding-choice .note{font-weight:400}.onboarding-choice:active,.onboarding-choice:focus,.onboarding-choice:hover{background-color:#fff;box-shadow:0 10px 30px 0 rgba(0,0,0,.35);color:#236a97}",""])},710:function(e,t,n){var r=n(709);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(570)(r,o);r.locals&&(e.exports=r.locals)},756:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(565),o=n(566);function a(e){var t=o("boxed-group","onboarding-step",{"is-open":e.open,"is-finished":e.finished}),n=!e.open&&e.finished;return r.createElement("div",{className:t,onClick:n?function(t){t.preventDefault(),e.onOpen()}:void 0,role:n?"button":void 0,tabIndex:n?0:void 0},r.createElement("div",{className:"onboarding-step-number"},e.stepNumber),!e.open&&e.renderResult(),r.createElement("div",{className:"boxed-group-header"},r.createElement("h2",null,e.stepTitle)),!e.open&&r.createElement("div",{className:"boxed-group-inner"}),r.createElement("div",{className:o({hidden:!e.open})},e.renderForm()))}},870:function(e,t,n){}}]);
//# sourceMappingURL=371.09225a63.chunk.js.map
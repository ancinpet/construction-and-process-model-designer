(window.webpackJsonp=window.webpackJsonp||[]).push([[268],{1607:function(t,o,e){"use strict";e.r(o);var n,r=e(615),s=e.n(r),i=e(565),a=e(585),u=e.n(a),p=e(13),c=(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),l=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return c(o,t),o.prototype.render=function(){var t=this.props.organization?Object(p.l)("permissions.page"):Object(p.l)("global_permissions.page"),o=this.props.organization?Object(p.l)("organization_permissions.page.description"):Object(p.l)("global_permissions.page.description");return i.createElement("header",{className:"page-header"},i.createElement("h1",{className:"page-title"},t),this.props.loading&&i.createElement("i",{className:"spinner"}),i.createElement("div",{className:"page-description"},o))},o}(i.PureComponent),g=e(574),m=e(950),f=e(923),d=e(605),h=e(774),y=e(578),v=function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),P=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.handleToggleUser=function(t,e){return t.permissions.includes(e)?o.props.revokePermissionFromUser(t.login,e):o.props.grantPermissionToUser(t.login,e)},o.handleToggleGroup=function(t,e){return t.permissions.includes(e)?o.props.revokePermissionFromGroup(t.name,e):o.props.grantPermissionToGroup(t.name,e)},o}return v(o,t),o.prototype.render=function(){var t=this.props,o=t.filter,e=t.groups,n=t.groupsPaging,r=t.users,s=t.usersPaging,a=this.props.organization?"organizations_permissions":"global_permissions",u=this.props.appState.qualifiers.includes("VW"),p=Object(h.e)(u?h.d:h.c,a),c=0,l=0;return"users"!==o&&(c+=e.length,l+=n?n.total:e.length),"groups"!==o&&(c+=r.length,l+=s?s.total:r.length),i.createElement(i.Fragment,null,i.createElement(f.a,{filter:this.props.filter,groups:this.props.groups,loading:this.props.loading,onToggleGroup:this.handleToggleGroup,onToggleUser:this.handleToggleUser,permissions:p,query:this.props.query,users:this.props.users},i.createElement(m.a,{filter:this.props.filter,onFilter:this.props.onFilter,onSearch:this.props.onSearch,query:this.props.query})),i.createElement(d.a,{count:c,loadMore:this.props.onLoadMore,total:l}))},o}(i.PureComponent),O=Object(g.connect)(function(t){return{appState:Object(y.getAppState)(t)}})(P),_=e(704),b=e(589),j=e(736);e(949);e.d(o,"App",function(){return z});var S=function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),w=function(){return(w=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t}).apply(this,arguments)},z=function(t){function o(o){var e=t.call(this,o)||this;return e.mounted=!1,e.loadUsersAndGroups=function(t,o){var n=e.props.organization,r=e.state,s=r.filter,i=r.query,a="groups"!==s?_.i({q:i||void 0,organization:n&&n.key,p:t}):Promise.resolve({paging:void 0,users:[]}),u="users"!==s?_.h({q:i||void 0,organization:n&&n.key,p:o}):Promise.resolve({paging:void 0,groups:[]});return Promise.all([a,u])},e.loadHolders=function(){return e.setState({loading:!0}),e.loadUsersAndGroups().then(function(t){var o=t[0],n=t[1];e.mounted&&e.setState({groups:n.groups,groupsPaging:n.paging,loading:!1,users:o.users,usersPaging:o.paging})},e.stopLoading)},e.onLoadMore=function(){var t=e.state,o=t.usersPaging,n=t.groupsPaging;return e.setState({loading:!0}),e.loadUsersAndGroups(o?o.pageIndex+1:1,n?n.pageIndex+1:1).then(function(t){var o=t[0],n=t[1];e.mounted&&e.setState(function(t){var e=t.groups,r=t.users;return{groups:e.concat(n.groups),groupsPaging:n.paging,loading:!1,users:r.concat(o.users),usersPaging:o.paging}})},e.stopLoading)},e.onFilter=function(t){e.setState({filter:t},e.loadHolders)},e.onSearch=function(t){e.setState({query:t},e.loadHolders)},e.addPermissionToGroup=function(t,o,e){return t.map(function(t){return t.name===o?w({},t,{permissions:t.permissions.concat([e])}):t})},e.addPermissionToUser=function(t,o,e){return t.map(function(t){return t.login===o?w({},t,{permissions:t.permissions.concat([e])}):t})},e.removePermissionFromGroup=function(t,o,e){return t.map(function(t){return t.name===o?w({},t,{permissions:s()(t.permissions,e)}):t})},e.removePermissionFromUser=function(t,o,e){return t.map(function(t){return t.login===o?w({},t,{permissions:s()(t.permissions,e)}):t})},e.grantPermissionToGroup=function(t,o){return e.mounted?(e.setState(function(n){var r=n.groups;return{groups:e.addPermissionToGroup(r,t,o)}}),_.o({groupName:t,permission:o,organization:e.props.organization&&e.props.organization.key}).then(function(){},function(){e.mounted&&e.setState(function(n){var r=n.groups;return{groups:e.removePermissionFromGroup(r,t,o)}})})):Promise.resolve()},e.grantPermissionToUser=function(t,o){return e.mounted?(e.setState(function(n){var r=n.users;return{users:e.addPermissionToUser(r,t,o)}}),_.p({login:t,permission:o,organization:e.props.organization&&e.props.organization.key}).then(function(){},function(){e.mounted&&e.setState(function(n){var r=n.users;return{users:e.removePermissionFromUser(r,t,o)}})})):Promise.resolve()},e.revokePermissionFromGroup=function(t,o){return e.mounted?(e.setState(function(n){var r=n.groups;return{groups:e.removePermissionFromGroup(r,t,o)}}),_.t({groupName:t,permission:o,organization:e.props.organization&&e.props.organization.key}).then(function(){},function(){e.mounted&&e.setState(function(n){var r=n.groups;return{groups:e.addPermissionToGroup(r,t,o)}})})):Promise.resolve()},e.revokePermissionFromUser=function(t,o){return e.mounted?(e.setState(function(n){var r=n.users;return{users:e.removePermissionFromUser(r,t,o)}}),_.u({login:t,permission:o,organization:e.props.organization&&e.props.organization.key}).then(function(){},function(){e.mounted&&e.setState(function(n){var r=n.users;return{users:e.addPermissionToUser(r,t,o)}})})):Promise.resolve()},e.stopLoading=function(){e.mounted&&e.setState({loading:!1})},e.state={filter:"all",groups:[],loading:!0,query:"",users:[]},e}return S(o,t),o.prototype.componentDidMount=function(){this.mounted=!0,this.loadHolders()},o.prototype.componentWillUnmount=function(){this.mounted=!1},o.prototype.render=function(){return i.createElement("div",{className:"page page-limited"},i.createElement(b.a,{suggestions:"global_permissions"}),i.createElement(u.a,{title:Object(p.l)("global_permissions.permission")}),i.createElement(l,{loading:this.state.loading,organization:this.props.organization}),i.createElement(O,{filter:this.state.filter,grantPermissionToGroup:this.grantPermissionToGroup,grantPermissionToUser:this.grantPermissionToUser,groups:this.state.groups,groupsPaging:this.state.groupsPaging,loadHolders:this.loadHolders,loading:this.state.loading,onFilter:this.onFilter,onLoadMore:this.onLoadMore,onSearch:this.onSearch,query:this.state.query,revokePermissionFromGroup:this.revokePermissionFromGroup,revokePermissionFromUser:this.revokePermissionFromUser,users:this.state.users,usersPaging:this.state.usersPaging}))},o}(i.PureComponent);o.default=Object(j.a)(z)},589:function(t,o,e){"use strict";var n,r=e(565),s=e(572),i=(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),a=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return i(o,t),o.prototype.componentDidMount=function(){this.context.suggestions.addSuggestions(this.props.suggestions)},o.prototype.componentDidUpdate=function(t){t.suggestions!==this.props.suggestions&&(this.context.suggestions.removeSuggestions(this.props.suggestions),this.context.suggestions.addSuggestions(t.suggestions))},o.prototype.componentWillUnmount=function(){this.context.suggestions.removeSuggestions(this.props.suggestions)},o.prototype.render=function(){return null},o.contextTypes={suggestions:s.object.isRequired},o}(r.PureComponent);o.a=a},605:function(t,o,e){"use strict";e.d(o,"a",function(){return p});var n=e(565),r=e(566),s=e(580),i=e(13),a=e(575),u=function(t,o){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)o.indexOf(n[r])<0&&(e[n[r]]=t[n[r]])}return e};function p(t){var o=t.ready,e=void 0===o||o,p=u(t,["ready"]),c=p.total&&p.total>p.count,l=n.createElement("a",{className:"spacer-left",href:"#",onClick:function(t){t.preventDefault(),t.currentTarget.blur(),p.loadMore&&p.loadMore()}},Object(i.l)("show_more")),g=r("spacer-top note text-center",{"new-loading":!e},p.className);return n.createElement("footer",{className:g},Object(i.m)("x_of_y_shown",Object(a.formatMeasure)(p.count,"INT",null),Object(a.formatMeasure)(p.total,"INT",null)),null!=p.loadMore&&c?l:null,p.loading&&n.createElement(s.a,{className:"vertical-bottom spacer-left position-absolute"}))}},736:function(t,o,e){"use strict";e.d(o,"a",function(){return l});var n,r=e(565),s=e(574),i=e(569),a=e(578),u=(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),p=function(){return(p=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t}).apply(this,arguments)},c=function(t,o){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)o.indexOf(n[r])<0&&(e[n[r]]=t[n[r]])}return e};function l(t){var o=function(o){function e(){return null!==o&&o.apply(this,arguments)||this}return u(e,o),e.prototype.render=function(){var o=this.props,e=o.customOrganizations,n=o.router,s=c(o,["customOrganizations","router"]);return!s.params.organizationKey&&e?(n.replace("/not_found"),null):r.createElement(t,p({},s))},e.displayName="forSingleOrganization("+t.displayName+")}",e}(r.Component);return Object(s.connect)(function(t){return{customOrganizations:Object(a.areThereCustomOrganizations)(t)}})(Object(i.withRouter)(o))}}}]);
//# sourceMappingURL=268.a3e4869b.chunk.js.map